webpackJsonp([2,8,9],{121:function(e,t,r){var n,o;r(401),n=r(257);var a=r(392);o=n=n||{},"object"!=typeof n.default&&"function"!=typeof n.default||(o=n=n.default),"function"==typeof o&&(o=o.options),o.render=a.render,o.staticRenderFns=a.staticRenderFns,e.exports=n},215:function(e,t){t.f={}.propertyIsEnumerable},216:function(e,t){t.f=Object.getOwnPropertySymbols},217:function(e,t,r){"use strict";t.default={name:"sg-body",props:{col:{type:Number,default:20}}}},218:function(e,t,r){e.exports={default:r(220),__esModule:!0}},219:function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}t.__esModule=!0;var o=r(218),a=n(o);t.default=a.default||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}},220:function(e,t,r){r(222),e.exports=r(6).Object.assign},221:function(e,t,r){"use strict";var n=r(108),o=r(216),a=r(215),s=r(109),i=r(110),c=Object.assign;e.exports=!c||r(41)(function(){var e={},t={},r=Symbol(),n="abcdefghijklmnopqrst";return e[r]=7,n.split("").forEach(function(e){t[e]=e}),7!=c({},e)[r]||Object.keys(c({},t)).join("")!=n})?function(e,t){for(var r=s(e),c=arguments.length,u=1,l=o.f,f=a.f;c>u;)for(var p,d=i(arguments[u++]),m=l?n(d).concat(l(d)):n(d),h=m.length,g=0;h>g;)f.call(d,p=m[g++])&&(r[p]=d[p]);return r}:c},222:function(e,t,r){var n=r(40);n(n.S+n.F,"Object",{assign:r(221)})},223:function(e,t,r){t=e.exports=r(21)(),t.push([e.i,".sg-body{margin-top:10px}",""])},224:function(e,t,r){var n,o;r(226),n=r(217);var a=r(225);o=n=n||{},"object"!=typeof n.default&&"function"!=typeof n.default||(o=n=n.default),"function"==typeof o&&(o=o.options),o.render=a.render,o.staticRenderFns=a.staticRenderFns,e.exports=n},225:function(e,t){e.exports={render:function(){var e=this;return e._c("el-row",{staticClass:"sg-body",attrs:{type:"flex",justify:"center"}},[e._c("el-col",{attrs:{span:e.col}},[e._t("default")],2)],1)},staticRenderFns:[]}},226:function(e,t,r){var n=r(223);"string"==typeof n&&(n=[[e.i,n,""]]);r(22)(n,{});n.locals&&(e.exports=n.locals)},257:function(e,t,r){"use strict";var n=r(219),o=r.n(n),a=r(224),s=r.n(a),i=r(14);r.n(i);t.default={name:"newTopic",data:function(){return{area:this.$route.params.area,areas:[],captcha:this.$store.state.config.captcha,preview:!1,buttonLoading:!1,form:{title:"",content:"",captcha:"",areaId:void 0},rules:{areaId:[{type:"number",required:!0,message:"请选择区域",trigger:"change"}],title:[{required:!0,message:"请输入文章标题",trigger:"blur"},{min:1,max:20,message:"长度在 1 到 20 个字符",trigger:"blur"}],content:[{required:!0,message:"请输入文章内容",trigger:"blur"},{min:1,message:"长度大于1",trigger:"blur"}]}}},computed:{previewButton:function(){return this.preview?"关闭预览":"实时预览"}},methods:o()({},r.i(i.mapActions)(["post"]),{onSubmit:function(e){var t=this;this.$refs.form.validate(function(e){return e?void t.post({url:"/t/new",data:t.form}).then(function(e){e.result?(t.$router.push("/t/"+e.data.topic.url),t.$message({message:"恭喜你，主题已发布",type:"success"})):t.$message({message:e.message,type:"warning"})}):(t.$message({message:"请填写必要信息",type:"warning"}),!1)})},getData:function(){var e=this;this.post({url:"/base/area"}).then(function(t){t.result?e.areas=t.data.areaList:e.$message.error("请填写必要信息")})},changeAreaChoosed:function(){for(var e=0;e<this.areas.length;e++)if(this.areas[e].abbr==this.area)return void(this.form.areaId=this.areas[e].id);this.$message.error("不存在此区域或此区域无法无法发布主题,请选择其他区域")},shouldChange:function(){return this.area&&this.areas.length>0},showPreview:function(){this.preview=!this.preview,this.preview&&(this.buttonLoading=!0)},rendered:function(){this.buttonLoading=!1}}),watch:{area:function(e,t){this.shouldChange()&&this.changeAreaChoosed()},areas:function(e,t){this.shouldChange()&&this.changeAreaChoosed()}},created:function(){this.getData()},components:{"sg-body":s.a,"sg-markdown":function(e,t){r.e(10).then(function(){var t=[r(252)];e.apply(null,t)}.bind(this)).catch(r.oe)}}}},318:function(e,t,r){t=e.exports=r(21)(),t.push([e.i,".publish{min-height:100px;padding:10px 0;border-radius:.2em;background-color:#fff;margin-bottom:1rem;box-shadow:0 2px 3px rgba(0,0,0,.1);border-bottom:1px solid hsla(0,0%,64%,.31)}.topicContent .el-textarea__inner{min-height:150px}",""])},392:function(e,t){e.exports={render:function(){var e=this;return e._c("sg-body",[e._t("default",[e._c("el-row",{attrs:{type:"flex",justify:"center"}},[e._c("el-col",{attrs:{span:15}},[e._c("el-form",{ref:"form",attrs:{rules:e.rules,"label-position":"left",model:e.form,"label-width":"100px"}},[e._c("el-form-item",{attrs:{label:"区域名称",prop:"areaId"}},[e._c("el-select",{directives:[{name:"model",rawName:"v-model",value:e.form.areaId,expression:"form.areaId"}],attrs:{placeholder:"请选择区域"},domProps:{value:e.form.areaId},on:{input:function(t){e.form.areaId=t}}},e._l(e.areas,function(t){return e._c("el-option",{attrs:{label:t.name,value:t.id}})}))],1),e._v(" "),e._c("el-form-item",{attrs:{label:"标题",prop:"title"}},[e._c("el-input",{directives:[{name:"model",rawName:"v-model",value:e.form.title,expression:"form.title"}],domProps:{value:e.form.title},on:{input:function(t){e.form.title=t}}})],1),e._v(" "),e._c("el-form-item",{attrs:{label:"内容",prop:"content"}},[e._c("el-input",{directives:[{name:"model",rawName:"v-model",value:e.form.content,expression:"form.content"}],staticClass:"topicContent",attrs:{type:"textarea"},domProps:{value:e.form.content},on:{input:function(t){e.form.content=t}}}),e._v(" "),e.preview?e._c("sg-markdown",{attrs:{sourceOut:e.form.content},on:{rendered:e.rendered}}):e._e()],1),e._v(" "),e.captcha?e._c("el-form-item",{attrs:{label:"验证码",prop:"captcha"}},[e._c("el-input",{directives:[{name:"model",rawName:"v-model",value:e.form.captcha,expression:"form.captcha"}],domProps:{value:e.form.captcha},on:{input:function(t){e.form.captcha=t}}})],1):e._e(),e._v(" "),e._c("el-form-item",[e._c("el-button",{attrs:{type:"primary"},on:{click:e.onSubmit}},[e._v("立即创建")]),e._v(" "),e._c("el-button",{attrs:{loading:e.buttonLoading},on:{click:e.showPreview}},[e._v(e._s(e.previewButton))])],1)],1)],1),e._v(" "),e._c("el-col",{attrs:{span:7,offset:1}},[e._c("el-row",{staticClass:"publish"},[e._c("el-row",{attrs:{col:24}},[e._v("\n                        主题发布公告\n                    ")])],1)],1)],1)])],2)},staticRenderFns:[]}},401:function(e,t,r){var n=r(318);"string"==typeof n&&(n=[[e.i,n,""]]);r(22)(n,{});n.locals&&(e.exports=n.locals)}});